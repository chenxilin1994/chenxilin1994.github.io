import{_ as o,C as e,c as t,o as n,a2 as a,b as r,w as l,a as c,G as i,a3 as F}from"./chunks/framework.D30IVGRC.js";const B=JSON.parse('{"title":"Python异常处理","description":"","frontmatter":{"layout":"doc","title":"Python异常处理","editLink":true},"headers":[],"relativePath":"python/basic/exceptions.md","filePath":"python/basic/exceptions.md"}'),y={name:"python/basic/exceptions.md"};function D(b,s,u,d,m,A){const p=e("Mermaid");return n(),t("div",null,[s[1]||(s[1]=a(`<h1 id="python异常处理" tabindex="-1">Python异常处理 <a class="header-anchor" href="#python异常处理" aria-label="Permalink to &quot;Python异常处理&quot;">​</a></h1><h2 id="第一章-理解基本概念" tabindex="-1">第一章：理解基本概念 <a class="header-anchor" href="#第一章-理解基本概念" aria-label="Permalink to &quot;第一章：理解基本概念&quot;">​</a></h2><h3 id="_1-1-什么是异常" tabindex="-1">1.1 什么是异常？ <a class="header-anchor" href="#_1-1-什么是异常" aria-label="Permalink to &quot;1.1 什么是异常？&quot;">​</a></h3><p><strong>生活比喻</strong>：<br> 就像烹饪时突然发现煤气灶打不着火，程序运行中也会遇到意外情况。异常处理就是提前准备好的应急方案。</p><p><strong>基本术语</strong>：</p><ul><li><strong>错误（Error）</strong>：无法恢复的严重问题（如语法错误）</li><li><strong>异常（Exception）</strong>：可以捕获处理的意外情况（如文件找不到）</li></ul><p><strong>常见异常类型</strong>：</p><table tabindex="0"><thead><tr><th>异常类型</th><th>触发场景</th><th>示例</th></tr></thead><tbody><tr><td><code>ValueError</code></td><td>值不符合预期</td><td><code>int(&#39;abc&#39;)</code></td></tr><tr><td><code>TypeError</code></td><td>类型操作错误</td><td><code>1 + &#39;1&#39;</code></td></tr><tr><td><code>IndexError</code></td><td>索引越界</td><td><code>lst=[0]; lst[1]</code></td></tr><tr><td><code>KeyError</code></td><td>字典键不存在</td><td><code>d={&#39;a&#39;:1}; d[&#39;b&#39;]</code></td></tr><tr><td><code>FileNotFoundError</code></td><td>文件未找到</td><td><code>open(&#39;nonexist.txt&#39;)</code></td></tr></tbody></table><h2 id="第二章-基础异常处理" tabindex="-1">第二章：基础异常处理 <a class="header-anchor" href="#第二章-基础异常处理" aria-label="Permalink to &quot;第二章：基础异常处理&quot;">​</a></h2><h3 id="_2-1-使用try-except捕获异常" tabindex="-1">2.1 使用try-except捕获异常 <a class="header-anchor" href="#_2-1-使用try-except捕获异常" aria-label="Permalink to &quot;2.1 使用try-except捕获异常&quot;">​</a></h3><p><strong>代码示例</strong>：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 可能出错的代码</span></span>
<span class="line"><span style="color:#BABED8;">    age </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> int</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">input</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">请输入年龄：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 处理值错误异常</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">输入的不是有效数字！</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 没有异常时执行</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;您输入的年龄是：</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">age</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">finally</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 无论是否异常都执行</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">---输入流程结束---</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>执行流程图示</strong>：</p>`,13)),(n(),r(F,null,{default:l(()=>[i(p,{id:"mermaid-115",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E6%89%A7%E8%A1%8Ctry%E4%BB%A3%E7%A0%81%E5%9D%97%7D%0A%20%20%20%20B%20--%3E%7C%E6%AD%A3%E5%B8%B8%7C%20C%5B%E6%89%A7%E8%A1%8Celse%E4%BB%A3%E7%A0%81%5D%0A%20%20%20%20B%20--%3E%7C%E5%BC%82%E5%B8%B8%7C%20D%5B%E5%8C%B9%E9%85%8Dexcept%E5%9D%97%5D%0A%20%20%20%20C%20--%3E%20E%5B%E6%89%A7%E8%A1%8Cfinally%5D%0A%20%20%20%20D%20--%3E%20E%0A%20%20%20%20E%20--%3E%20F%5B%E7%BB%A7%E7%BB%AD%E5%90%8E%E7%BB%AD%E4%BB%A3%E7%A0%81%5D%0A"})]),fallback:l(()=>s[0]||(s[0]=[c(" Loading... ")])),_:1})),s[2]||(s[2]=a(`<h2 id="第三章-处理多种异常" tabindex="-1">第三章：处理多种异常 <a class="header-anchor" href="#第三章-处理多种异常" aria-label="Permalink to &quot;第三章：处理多种异常&quot;">​</a></h2><h3 id="_3-1-多异常处理方案" tabindex="-1">3.1 多异常处理方案 <a class="header-anchor" href="#_3-1-多异常处理方案" aria-label="Permalink to &quot;3.1 多异常处理方案&quot;">​</a></h3><p><strong>示例场景</strong>：<br> 处理用户输入的数字计算：</p><ol><li>输入非数字 → ValueError</li><li>除零错误 → ZeroDivisionError</li></ol><p><strong>带详细注释的代码</strong>：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> calculate</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 获取用户输入</span></span>
<span class="line"><span style="color:#BABED8;">        num1 </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">input</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">请输入第一个数字：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#BABED8;">        num2 </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">input</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">请输入第二个数字：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 执行计算</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> num1 </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;"> num2</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> ve</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 处理值错误（输入非数字）</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;输入错误：</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">ve</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">请确保输入的是有效数字</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> ZeroDivisionError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 处理除零错误</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">错误：除数不能为零！</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">inf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # 返回无穷大</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 没有异常时显示结果</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;计算结果：</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">result</span><span style="color:#C792EA;">:.2f</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    finally</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # 清理资源（如果有）</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">计算过程结束</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">calculate</span><span style="color:#89DDFF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="第四章-自定义异常" tabindex="-1">第四章：自定义异常 <a class="header-anchor" href="#第四章-自定义异常" aria-label="Permalink to &quot;第四章：自定义异常&quot;">​</a></h2><h3 id="_4-1-创建业务异常" tabindex="-1">4.1 创建业务异常 <a class="header-anchor" href="#_4-1-创建业务异常" aria-label="Permalink to &quot;4.1 创建业务异常&quot;">​</a></h3><p><strong>场景说明</strong>：<br> 验证用户密码强度：</p><ul><li>长度不足 → 抛出ShortPasswordError</li><li>缺少特殊字符 → 缺少SpecialCharError</li></ul><p><strong>完整实现代码</strong>：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 自定义异常类</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> ShortPasswordError</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">密码长度不足异常</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> length</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">length</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> length</span></span>
<span class="line"><span style="color:#FFCB6B;">        super</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;密码至少需要8位，当前长度：</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">length</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#FFCB6B;"> MissingSpecialCharError</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">缺少特殊字符异常</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> __init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#FFCB6B;">        super</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">密码必须包含!@#$%^&amp;*其中一种字符</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> validate_password</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">password</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 检查长度</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">password</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> &lt;</span><span style="color:#F78C6C;"> 8</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        raise</span><span style="color:#82AAFF;"> ShortPasswordError</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">password</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # 检查特殊字符</span></span>
<span class="line"><span style="color:#BABED8;">    special_chars </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> set</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">!@#$%^&amp;*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> not</span><span style="color:#82AAFF;"> any</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">char </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#82AAFF;"> special_chars </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#82AAFF;"> char </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#82AAFF;"> password</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        raise</span><span style="color:#82AAFF;"> MissingSpecialCharError</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用示例</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    validate_password</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">abc123</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;">ShortPasswordError</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> MissingSpecialCharError</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;密码验证失败：</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">e</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">密码符合要求</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="第五章-异常处理最佳实践" tabindex="-1">第五章：异常处理最佳实践 <a class="header-anchor" href="#第五章-异常处理最佳实践" aria-label="Permalink to &quot;第五章：异常处理最佳实践&quot;">​</a></h2><h3 id="_5-1-实用技巧清单" tabindex="-1">5.1 实用技巧清单 <a class="header-anchor" href="#_5-1-实用技巧清单" aria-label="Permalink to &quot;5.1 实用技巧清单&quot;">​</a></h3><ol><li><strong>精确捕获异常</strong></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 不推荐（捕获所有异常）</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 推荐做法</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li><strong>异常链保留</strong></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#BABED8;"> SomeError </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    raise</span><span style="color:#82AAFF;"> NewError</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">附加信息</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;"> from</span><span style="color:#BABED8;"> e</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li><strong>日志记录</strong></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> logging</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    logging</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">操作失败</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> exc_info</span><span style="color:#89DDFF;">=True)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="4"><li><strong>资源清理</strong></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">file </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> None</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    file </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> open</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data.txt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#FFCB6B;"> FileNotFoundError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">finally</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> file</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">  # 确保文件关闭</span></span>
<span class="line"><span style="color:#BABED8;">        file</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h2 id="综合练习-温度转换器" tabindex="-1">综合练习：温度转换器 <a class="header-anchor" href="#综合练习-温度转换器" aria-label="Permalink to &quot;综合练习：温度转换器&quot;">​</a></h2><p><strong>功能需求</strong>：</p><ul><li>将华氏度转换为摄氏度</li><li>处理无效输入</li><li>允许重复输入</li></ul><p><strong>完整代码</strong>：</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> fahrenheit_to_celsius</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">f</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">华氏度转摄氏度</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;">f </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;"> 32</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> *</span><span style="color:#F78C6C;"> 5</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#89DDFF;"> True:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        input_str </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> input</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">请输入华氏温度（输入q退出）：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#BABED8;"> input_str</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">q</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            break</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#BABED8;">        f_temp </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> float</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">input_str</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        c_temp </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> fahrenheit_to_celsius</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">f_temp</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">f_temp</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">华氏度 = </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">c_temp</span><span style="color:#C792EA;">:.2f</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">摄氏度&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">错误：请输入有效数字！</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> KeyboardInterrupt</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">\\n</span><span style="color:#C3E88D;">检测到退出请求...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        break</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    finally</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> *</span><span style="color:#F78C6C;"> 30</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">感谢使用温度转换器！</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><hr><h2 id="常见问题解答" tabindex="-1">常见问题解答 <a class="header-anchor" href="#常见问题解答" aria-label="Permalink to &quot;常见问题解答&quot;">​</a></h2><p><strong>Q：为什么我的异常没有被捕获？</strong><br> A：检查异常类型是否匹配，可使用基类<code>Exception</code>捕获所有异常（不推荐长期使用）</p><p><strong>Q：如何查看完整错误信息？</strong></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> traceback</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    traceback</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">print_exc</span><span style="color:#89DDFF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Q：该在什么情况下自定义异常？</strong><br> A：当需要表达特定的业务逻辑错误时，比如：</p><ul><li>用户权限不足</li><li>数据格式不符合要求</li><li>业务流程中的特定错误状态</li></ul>`,35))])}const h=o(y,[["render",D]]);export{B as __pageData,h as default};
